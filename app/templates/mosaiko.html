{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', path='mosaiko.css') }}">
{% endblock %}

{% block content %}
<div class="container-check">
    <!-- CabeÃ§alho -->
    <div class="header-check">
        <h1>ğŸ” Sistema de Checagem de Fatos com IA</h1>
        <p>Execute os mÃ³dulos individualmente ou faÃ§a a checagem completa</p>
    </div>

    <!-- Gerenciamento de Projetos -->
    <div class="projeto-controle">
        <div class="projeto-select-group">
            <label for="projetoSelect">ğŸ“ Projeto:</label>
            <select id="projetoSelect" onchange="selecionarProjeto()">
                <option value="">Novo Projeto</option>
            </select>
        </div>
        <div class="projeto-botoes">
            <button class="btn-secundario" onclick="criarNovoProjeto()">
                â• Novo
            </button>
            <button class="btn-secundario" id="btnBaixarProjeto" onclick="baixarProjeto()" disabled>
                â¬‡ï¸ Baixar
            </button>
            <button class="btn-perigo" id="btnExcluirProjeto" onclick="excluirProjeto()" disabled>
                ğŸ—‘ï¸ Excluir
            </button>
        </div>
    </div>

    <!-- Ãrea de Alertas -->
    <div id="alertas"></div>

    <div class="main-content-check">
        <!-- SeÃ§Ã£o de Input -->
        <div class="input-section-check">
            <div class="input-form-check">
                <h2>ğŸ“ Dados para VerificaÃ§Ã£o</h2>

                <div class="form-group">
                    <label for="tipo_midia">Tipo de MÃ­dia:</label>
                    <select id="tipo_midia">
                        <option value="texto">ğŸ“ Texto</option>
                        <option value="imagem">ğŸ–¼ï¸ Imagem</option>
                        <option value="video">ğŸ¥ VÃ­deo</option>
                        <option value="audio">ğŸµ Ãudio</option>
                    </select>
                </div>
                
                <!-- ÃREA DE INPUT PARA TEXTO -->
                <div class="form-group" id="texto_area">
                    <label for="texto" id="label_texto_principal">Texto para VerificaÃ§Ã£o:</label>
                    <textarea id="texto" required placeholder="Cole aqui o texto que deseja verificar..."></textarea>
                </div>

                <!-- ÃREA DE INPUT PARA IMAGEM (inicialmente oculta) -->
                <div class="form-group" id="upload_area" style="display: none;">
                    <label for="imagem_upload">Selecione uma Imagem:</label>
                    <input type="file" id="imagem_upload" accept="image/*" class="form-control">
                    <p id="file_info" style="margin-top: 8px; font-size: 12px; color: #666;"></p>
                </div>

                <div class="form-group">
                    <label for="url_fonte">URL da Fonte (opcional):</label>
                    <input type="url" id="url_fonte" placeholder="https://exemplo.com/noticia">
                </div>

                <div class="form-group">
                    <label for="contexto">Contexto Adicional (opcional):</label>
                    <textarea id="contexto" rows="3" placeholder="InformaÃ§Ãµes adicionais..."></textarea>
                </div>

                <!-- BotÃµes dos MÃ³dulos -->
                <div class="modulos-buttons">
                    <h3>Executar MÃ³dulos:</h3>
                    
                    <div class="modulo-linha">
                        <button class="btn-modulo" id="btnModulo1" onclick="executarModulo('modulo1')">
                            ğŸ“¥ MÃ³dulo 1: ExtraÃ§Ã£o
                        </button>
                        <button class="btn-rerun" data-modulo="modulo1" title="Reexecutar MÃ³dulo" disabled>ğŸ”„</button>
                        <button class="btn-visualizar" data-modulo="modulo1" title="Ver Resultado" disabled>ğŸ‘ï¸</button>
                    </div>

                    <div class="modulo-linha">
                        <button class="btn-modulo" id="btnModulo2" onclick="executarModulo('modulo2')" disabled>
                            ğŸ” MÃ³dulo 2: AlegaÃ§Ãµes
                        </button>
                        <button class="btn-rerun" data-modulo="modulo2" title="Reexecutar MÃ³dulo" disabled>ğŸ”„</button>
                        <button class="btn-visualizar" data-modulo="modulo2" title="Ver Resultado" disabled>ğŸ‘ï¸</button>
                    </div>

                    <div class="modulo-linha">
                        <button class="btn-modulo" id="btnModulo3" onclick="executarModulo('modulo3')" disabled>
                            ğŸ“š MÃ³dulo 3: EvidÃªncias
                        </button>
                        <button class="btn-rerun" data-modulo="modulo3" title="Reexecutar MÃ³dulo" disabled>ğŸ”„</button>
                        <button class="btn-visualizar" data-modulo="modulo3" title="Ver Resultado" disabled>ğŸ‘ï¸</button>
                    </div>

                    <div class="modulo-linha">
                        <button class="btn-modulo" id="btnModulo4" onclick="executarModulo('modulo4')" disabled>
                            âš–ï¸ MÃ³dulo 4: Veredito
                        </button>
                        <button class="btn-rerun" data-modulo="modulo4" title="Reexecutar MÃ³dulo" disabled>ğŸ”„</button>
                        <button class="btn-visualizar" data-modulo="modulo4" title="Ver Resultado" disabled>ğŸ‘ï¸</button>
                    </div>
                    
                    <button class="btn-check" onclick="executarCompleto()">
                        âœ… Executar Checagem Completa
                    </button>
                </div>

                <!-- Indicador de Loading -->
                <div id="loading" style="display: none;">
                    <div class="loader"></div>
                    <p id="loading-text" style="text-align: center; margin-top: 10px;">Processando...</p>
                </div>
            </div>
        </div>

        <!-- SeÃ§Ã£o de Resultados -->
        <div class="results-section-check">
            <div class="result-card-check">
                <h3>ğŸ“Š Resultados</h3>
                <div id="resultados">
                    <p class="empty-state">
                        Selecione um projeto existente ou crie um novo para comeÃ§ar.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', path='mosaiko.js') }}"></script>
{% endblock %}